{"body": [{"indent": 0, "text": ["HeightField Erode"], "type": "title", "extent": [0, 22], "level": 0}, {"indent": 0, "type": "summary", "extent": [131, 233], "text": ["Calculates thermal and hydraulic erosion over time (frames) to create more realistic terrain."]}, {"body": [{"indent": 0, "type": "para", "extent": [248, 380], "text": ["This node uses rainfall, the erodibility of the soil, and entrainment rates as variables to simulate erosion and deposit buildup."]}, {"indent": 0, "type": "para", "extent": [380, 714], "text": ["This node works iteratively during playback. It will appear to have no effect on the first frame. You need to play the animation to see the effects of the node. Once the simulation converges to something that looks good, you can export the volumes from that frame to a file (using ", {"text": ["Height Field Output"], "fullpath": "/nodes/sop/heightfield_output", "scheme": "Node", "type": "link", "value": "/nodes/sop/heightfield_output"}, ")."]}, {"indent": 0, "type": "para", "extent": [714, 819], "text": ["For an example of erosion, create the Mountain preset from the ", {"text": ["Terrain FX"], "type": "ui"}, " shelf tab and press Play."]}, {"indent": 0, "type": "para", "extent": [819, 869], "text": [{"text": "", "fullpath": "/images/nodes/sop/heightfield_erode.png", "scheme": "Image", "type": "link", "value": "/images/nodes/sop/heightfield_erode.png"}]}], "indent": 0, "level": 2, "text": ["Overview"], "extent": [233, 248], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [912, 1031], "text": ["Turn ", {"text": ["Main \u25b8 Hydro \u25b8 Bank angle"], "type": "ui"}, " down to get wide, shallow channels. Turn it up to get narrow, deep channels."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [1031, 1144], "text": ["Turn ", {"text": ["Advanced \u25b8 Precipitation \u25b8 Density"], "type": "ui"}, " down to get narrow channels, turn it up to get wide channels."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [1144, 1294], "text": ["Turn ", {"text": ["Advanced \u25b8 Raindrop settings \u25b8 Expand radius"], "type": "ui"}, " down to get more winding, narrow channels, turn it up to get straighter, wider channels."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [1294, 1417], "text": ["Turn ", {"text": ["Advanced \u25b8 Raindrop settings \u25b8 Blur radius"], "type": "ui"}, " down to get deeper channels, turn it up to get softer channels."]}], "container": true, "type": "bullet_group"}], "indent": 0, "type": "dt", "extent": [896, 912], "text": ["Channel shape"]}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [1430, 1533], "text": ["Turn ", {"text": ["Main \u25b8 Thermal \u25b8 Cut angle"], "type": "ui"}, " down to get sharp ridges, turn it up to get rounded ridges."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [1533, 1587], "text": ["This is also affected by the ", {"text": ["Removal rate"], "type": "ui"}, "."]}], "container": true, "type": "bullet_group"}], "indent": 0, "type": "dt", "extent": [1417, 1430], "text": ["Ridge shape"]}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [1594, 1716], "text": ["Turn ", {"text": ["Advanced \u25b8 Precipitation \u25b8 Evaporation rate"], "type": "ui"}, " down to get big lakes, turn it up to get smaller or no lakes."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [1716, 1846], "text": ["Turn ", {"text": ["Advanced \u25b8 Raindrop settings \u25b8 Blur radius"], "type": "ui"}, " down to get harsher lake edges, turn it up to get smoother lake edges."]}], "container": true, "type": "bullet_group"}], "indent": 0, "type": "dt", "extent": [1587, 1594], "text": ["Lakes"]}, {"body": [{"body": [{"indent": 4, "blevel": 6, "type": "bullet", "extent": [1854, 1980], "text": ["Turn ", {"text": ["Advanced \u25b8 Debris flow \u25b8 Quantization"], "type": "ui"}, " down to get smoother debris flow, turn it up to get grainy debris flow."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [1980, 2127], "text": ["Turn ", {"text": ["Advanced \u25b8 Debris flow \u25b8 Max height"], "type": "ui"}, " down to get less/no debris along ridge lines, turn it up to get more debris along ridge lines."]}, {"indent": 4, "blevel": 6, "type": "bullet", "extent": [2127, 2265], "text": ["Turn ", {"text": ["Advanced \u25b8 Debris flow \u25b8 Repose angle"], "type": "ui"}, " down to get less pile-up (like sand), turn it up to get more pile-up (like rocks)."]}], "container": true, "type": "bullet_group"}], "indent": 0, "type": "dt", "extent": [1846, 1854], "text": ["Debris"]}], "container": true, "type": "dt_group"}], "indent": 0, "level": 2, "text": ["Controlling the look"], "extent": [869, 896], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"body": [{"body": [{"body": [{"indent": 8, "blevel": 10, "type": "bullet", "extent": [2395, 2440], "text": ["Set ", {"text": ["Ramp up iterations"], "type": "ui"}, " to ", {"text": ["0"], "type": "code"}, "."]}, {"indent": 8, "blevel": 10, "type": "bullet", "extent": [2440, 2481], "text": ["Set ", {"text": ["Initial factor"], "type": "ui"}, " to ", {"text": ["1"], "type": "code"}, "."]}, {"indent": 8, "blevel": 10, "type": "bullet", "extent": [2481, 2521], "text": ["Set ", {"text": ["Slope factor"], "type": "ui"}, " to ", {"text": ["0"], "type": "code"}, "."]}], "container": true, "type": "bullet_group"}], "indent": 4, "text": ["Under ", {"text": ["Hydro \u25b8 Erodability Adjustments"], "type": "ui"}, ":"], "extent": [2345, 2395], "blevel": 6, "type": "bullet"}, {"body": [{"body": [{"indent": 8, "blevel": 10, "type": "bullet", "extent": [2556, 2602], "text": ["Set ", {"text": ["Sediment capacity"], "type": "ui"}, " to ", {"text": ["20"], "type": "code"}, "."]}], "container": true, "type": "bullet_group"}], "indent": 4, "text": ["Under ", {"text": ["Hydro \u25b8 Riverbed"], "type": "ui"}, ":"], "extent": [2521, 2556], "blevel": 6, "type": "bullet"}, {"body": [{"body": [{"indent": 8, "blevel": 10, "type": "bullet", "extent": [2632, 2676], "text": ["Turn ", {"text": ["Debris post smooth"], "type": "ui"}, " on. "]}], "container": true, "type": "bullet_group"}], "indent": 4, "text": ["Under ", {"text": ["Debris flow"], "type": "ui"}, ":"], "extent": [2602, 2632], "blevel": 6, "type": "bullet"}], "container": true, "type": "bullet_group"}], "indent": 0, "text": ["For a first pass erosion, on the ", {"text": ["Advanced"], "type": "ui"}, " tab:"], "extent": [2286, 2345], "blevel": 2, "type": "bullet"}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [2676, 2727], "text": ["Removal rates can be negative to build up soil."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [2727, 2791], "text": ["You can fix pitting/holes  by reducing ", {"text": ["Max debris depth"], "type": "ui"}, "."]}, {"indent": 0, "blevel": 2, "type": "bullet", "extent": [2791, 2884], "text": ["A masked ", {"text": ["Grid bias"], "type": "ui"}, " can add uneven erosion. Remap the mask to a range of ", {"text": ["-1"], "type": "code"}, " to ", {"text": ["1"], "type": "code"}, "."]}], "container": true, "type": "bullet_group"}], "indent": 0, "level": 2, "text": ["Tips and notes"], "extent": [2265, 2286], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2940, 3176], "text": ["Click to clear the simulation cache. Be careful clicking this if you are not viewing the first frame. Houdini will have to re-simulate every frame up to the one you are viewing, which can be slow if you are on a high frame number."]}], "indent": 0, "text": ["Reset Simulation"], "role": "item", "attrs": {"id": "resimulate"}, "extent": [2896, 2915], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3207, 3346], "text": ["Freeze the output at the specified frame. This can be used to fix the output once the number of desired frames is determined."]}], "indent": 0, "text": ["Freeze"], "role": "item", "attrs": {"id": "dofreeze"}, "extent": [3176, 3184], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [3397, 3452], "text": ["The number of frames to freeze the output at."]}], "indent": 0, "text": ["Freeze at Frame"], "role": "item", "attrs": {"id": "freezeframe"}, "extent": [3346, 3363], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [3521, 3625], "text": ["Controls how many meters of bedrock or debris (here entrained material) is eroded every iteration."]}], "indent": 0, "text": ["Global Erosion Rate"], "role": "item", "attrs": {"id": "globalerosionrate"}, "extent": [3463, 3489], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "type": "para", "extent": [3625, 3872], "text": ["These options control erosion from rainfall, where the flow of water downhill weathers the terrain. You can control the amount of rainfall using the controls on the ", {"text": ["Precipitation"], "type": "ui"}, " tab and the water flow using the controls on the ", {"text": ["Flow"], "type": "ui"}, " tab."]}, {"indent": 0, "text": [" Hydro "], "type": "sep", "extent": [3872, 3886], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [3930, 4145], "text": ["Controls the softness of bedrock or debris (here entrained material). Higher values would make the terrain easier to erode, causing deeper incisions, more sediment, and more debris being deposited as a result."]}], "indent": 0, "text": ["Erodability"], "role": "item", "attrs": {"id": "erodability"}, "extent": [3886, 3904], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4208, 4280], "text": ["Controls whether to use a mask for erodability or not."]}], "indent": 0, "text": ["erodabilitymaskmode"], "role": "item", "attrs": {"id": "erodabilitymaskmode"}, "extent": [4145, 4166], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4341, 4392], "text": ["The name of the erodability mask."]}], "indent": 0, "text": ["Erodability Mask"], "role": "item", "attrs": {"id": "erodabilitymasklayer"}, "extent": [4280, 4298], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4432, 4528], "text": ["Controls the rate at which erosion happens. This is a multiplier on ", {"text": ["Erodability"], "type": "code"}, "."]}], "indent": 0, "text": ["Erosion Rate"], "role": "item", "attrs": {"id": "erosionrate"}, "extent": [4392, 4406], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4564, 4697], "text": ["Sets the angle at which the riverbank rests relative to the riverbed. Lowre values would make wider and flatter river channels."]}], "indent": 0, "text": ["Bank Angle"], "role": "item", "attrs": {"id": "bankangle"}, "extent": [4528, 4540], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4756, 4827], "text": ["Controls whether to use a mask for bank angle or not."]}], "indent": 0, "text": ["bankanglemaskmode"], "role": "item", "attrs": {"id": "bankanglemaskmode"}, "extent": [4697, 4716], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4885, 4927], "text": ["The name of the bank angle mask."]}], "indent": 0, "text": ["Bank Angle Mask"], "role": "item", "attrs": {"id": "bankanglemasklayer"}, "extent": [4827, 4844], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4978, 5112], "text": ["The number of iterations of water spreading simulation to do. More iterations result in longer and less dense incisions."]}], "indent": 0, "text": ["Spread Iterations"], "role": "item", "attrs": {"id": "water_spreaditers"}, "extent": [4927, 4946], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Thermal "], "type": "sep", "extent": [5112, 5128], "level": 3}, {"indent": 0, "type": "para", "extent": [5128, 5294], "text": ["Thermal weathering is caused by frozen rocks thawing and breaking, causing features to wear down and smooth out, and material to pile up on the bottom of inclines."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [5333, 5540], "text": ["Controls the softness of the eroding layer or material layer. Higher values would make the terrain easier to erode, causing deeper incisions, more sediment, and more debris being deposited as a result."]}], "indent": 0, "text": ["Erodability"], "role": "item", "attrs": {"id": "erodability"}, "extent": [5294, 5307], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5603, 5675], "text": ["Controls whether to use a mask for erodability or not."]}], "indent": 0, "text": ["erodabilitymaskmode"], "role": "item", "attrs": {"id": "erodabilitymaskmode"}, "extent": [5540, 5561], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5736, 5787], "text": ["The name of the erodability mask."]}], "indent": 0, "text": ["Erodability Mask"], "role": "item", "attrs": {"id": "erodabilitymasklayer"}, "extent": [5675, 5693], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5827, 5915], "text": ["Controls the rate at which erosion happens. This is a multiplier on ", {"text": ["Erodability"], "type": "code"}, "."]}], "indent": 0, "text": ["Erosion Rate"], "role": "item", "attrs": {"id": "erosionrate"}, "extent": [5787, 5801], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [5949, 6108], "text": ["Set the angle at which the thermal erosion would stop cutting beyond. A lower angle would make the cuts flatter and allow for more erosion to take place."]}], "indent": 0, "text": ["Cut Angle"], "role": "item", "attrs": {"id": "cutangle"}, "extent": [5915, 5926], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6161, 6227], "text": ["Controls whether to use a mask for cut angle or not."]}], "indent": 0, "text": ["cutanglemaskmode"], "role": "item", "attrs": {"id": "cutanglemaskmode"}, "extent": [6108, 6126], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6279, 6316], "text": ["The name of the cut angle mask."]}], "indent": 0, "text": ["Cut Angle Mask"], "role": "item", "attrs": {"id": "cutanglemasklayer"}, "extent": [6227, 6243], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6353, 6440], "text": ["Random seed to make erosion vary for the same set of variables on the same input."]}], "indent": 0, "text": ["Global Seed"], "role": "item", "attrs": {"id": "seed "}, "extent": [6316, 6329], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Main"], "extent": [3452, 3463], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "text": [" Hydro Erosion "], "type": "sep", "extent": [6455, 6478], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [6525, 6861], "text": ["Proportion of debris from hydro erosion that is deleted. This simulates water carrying away a certain amount of debris rather than it all accumulating. A value of ", {"text": ["0"], "type": "code"}, " representes no deletion. Negative values correspond to the debris being less dense than the rock, so one unit of eroded rock produces more than one unit of debris."]}], "indent": 0, "text": ["Removal Rate"], "role": "item", "attrs": {"id": "hydro_removalrate"}, "extent": [6478, 6493], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [6914, 6974], "text": ["Stop erosion when the debris layer reaches this depth."]}], "indent": 0, "text": ["Max Debris Depth"], "role": "item", "attrs": {"id": "hydro_maxdebrisdepth"}, "extent": [6861, 6879], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [7022, 7352], "text": ["Controls how biased the movement of material is. Setting it to positive values would bias the movement in the direction of the principal axes, and when set to negative values, it would bias the movement at angles of 45 degree relative to the principal axes. The default value of zero would mean no bias in any direction."]}], "indent": 0, "text": ["Grid Bias"], "role": "item", "attrs": {"id": "hydro_gridbias"}, "extent": [6974, 6985], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [7415, 7485], "text": ["Controls whether to use a mask for grid bias or not."]}], "indent": 0, "text": ["gridbiasmaskmode"], "role": "item", "attrs": {"id": "hydro_gridbiasmaskmode"}, "extent": [7352, 7370], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [7547, 7588], "text": ["The name of the grid bias mask."]}], "indent": 0, "text": ["Grid Bias Mask"], "role": "item", "attrs": {"id": "hydro_gridbiasmasklayer"}, "extent": [7485, 7501], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Erodability "], "type": "sep", "extent": [7588, 7610], "level": 4}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [7683, 7764], "text": ["The iteration where erodability would get to its maximum value."]}], "indent": 0, "text": ["Ramp-up Iterations"], "role": "item", "attrs": {"id": "hydro_erodability_rampupiters"}, "extent": [7610, 7631], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [7834, 8057], "text": ["Controls how much of the set erodability would the material have on its initial movement. It would increase over the set spread iterations until the max iteration, where it would stay at maximum set value."]}], "indent": 0, "text": ["Initial Factor"], "role": "item", "attrs": {"id": "hydro_erodability_initialfactor"}, "extent": [7764, 7780], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [8123, 8363], "text": ["Control how much the slope of the terrain would affect the erosion amount. Higher values would increase the slope effecting the erosion, and lower values would decrease it. Lowing this value would increase erodability as a result."]}], "indent": 0, "text": ["Slope Factor"], "role": "item", "attrs": {"id": "hydro_erodability_slopefactor"}, "extent": [8057, 8071], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Riverbed "], "type": "sep", "extent": [8363, 8382], "level": 4}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [8454, 8677], "text": ["A multiplier on ", {"text": ["Erosion Rate"], "type": "code"}, " that would cause a change on the riverbed only. Increasing this value would cause a more aggressive erosion on the bed, and as a result, it would increase the depth of the incisions."]}], "indent": 0, "text": ["Erosion Rate Factor"], "role": "item", "attrs": {"id": "hydro_bed_erosionratefactor"}, "extent": [8382, 8404], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8733, 9000], "text": ["Controls the rate at which the excess sediment turns into debris. A value of zero means no sediment is turned into debris, while a value of one will convert all created sediment into debris, and the bedrock would in turn be protected more by the created debris."]}], "indent": 0, "text": ["Deposition Rate"], "role": "item", "attrs": {"id": "hydro_bed_depositionrate"}, "extent": [8677, 8694], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [9079, 9155], "text": ["Controls whether to use a mask for deposition rate or not."]}], "indent": 0, "text": ["depositionratemaskmode"], "role": "item", "attrs": {"id": "hydro_bed_depositionratemaskmode"}, "extent": [9000, 9024], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [9233, 9280], "text": ["The name of the deposition rate mask."]}], "indent": 0, "text": ["Deposition Rate Mask"], "role": "item", "attrs": {"id": "hydro_bed_depositionratemasklayer"}, "extent": [9155, 9177], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9335, 9517], "text": ["The amount of sediment that can be carried per unit of moving water. The higher the capacity, the longer the material can erode before it starts depositing its excess sediment."]}], "indent": 0, "text": ["Sediment Capacity"], "role": "item", "attrs": {"id": "hydro_bed_sedimentcap"}, "extent": [9280, 9299], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Riverbank ~~~~        "], "type": "sep", "extent": [9517, 9545], "level": 4}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [9618, 9851], "text": ["A multiplier on ", {"text": ["Erosion Rate"], "type": "code"}, " that would cause a change on the riverbank only. Increasing this value would cause a more aggressive erosion on the bank, and as a result, it would increase the width of the incisions."]}], "indent": 0, "text": ["Erosion Rate Factor"], "role": "item", "attrs": {"id": "hydro_bank_erosionratefactor"}, "extent": [9545, 9567], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [9934, 10118], "text": ["The maximum of bank to bed water column height ratio that will be considered as river bank bank. Ratios higher than this number will not be considered as bank during erosion."]}], "indent": 0, "text": ["Max Bed to Bank Water Ratio"], "role": "item", "attrs": {"id": "hydro_bank_maxbankbedwaterratio"}, "extent": [9851, 9880], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Thermal Erosion "], "type": "sep", "extent": [10118, 10142], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [10191, 10522], "text": ["Proportion of debris from thermal erosion that is deleted. This simulates wind carrying away a certain amount of debris rather than it all accumulating. The default is ", {"text": ["0"], "type": "code"}, " (no deletion). Negative values correspond to the debris being less dense than the rock, so one unit of eroded rock produces more than one unit of debris."]}], "indent": 0, "text": ["Removal Rate"], "role": "item", "attrs": {"id": "thermal_removalrate"}, "extent": [10142, 10157], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [10577, 10637], "text": ["Stop erosion when the debris layer reaches this depth."]}], "indent": 0, "text": ["Max Debris Depth"], "role": "item", "attrs": {"id": "thermal_maxdebrisdepth"}, "extent": [10522, 10540], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [10687, 11017], "text": ["Controls how biased the movement of material is. Setting it to positive values would bias the movement in the direction of the principal axes, and when set to negative values, it would bias the movement at angles of 45 degree relative to the principal axes. The default value of zero would mean no bias in any direction."]}], "indent": 0, "text": ["Grid Bias"], "role": "item", "attrs": {"id": "thermal_gridbias"}, "extent": [10637, 10648], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [11082, 11152], "text": ["Controls whether to use a mask for grid bias or not."]}], "indent": 0, "text": ["gridbiasmaskmode"], "role": "item", "attrs": {"id": "thermal_gridbiasmaskmode"}, "extent": [11017, 11035], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [11216, 11265], "text": ["The name of the grid bias mask."]}], "indent": 0, "text": ["Grid Bias Mask"], "role": "item", "attrs": {"id": "thermal_gridbiasmasklayer"}, "extent": [11152, 11168], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Precipitation "], "type": "sep", "extent": [11265, 11287], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [11324, 11478], "text": ["The name of a mask layer controlling rainfall. The values in the layer are a scale on the ", {"text": ["Amount"], "type": "ui"}, " parameter.  This is read from the second input."]}], "indent": 0, "text": ["Mask"], "role": "item", "attrs": {"id": "maskpreciplayer"}, "extent": [11287, 11294], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [11512, 11684], "text": ["The amount of rainfall simulated in each frame. If you use very large amounts you will not see much erosion since essentially the entire terrain would be under water."]}], "indent": 0, "text": ["Amount"], "role": "item", "attrs": {"id": "rain_amount"}, "extent": [11478, 11486], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [11720, 11875], "text": ["How closely packed rain drops are. Smaller densities give more erosion lines. Larger densities create erosion cracks that are father apart and wider."]}], "indent": 0, "text": ["Density"], "role": "item", "attrs": {"id": "rain_density"}, "extent": [11684, 11693], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [11924, 12109], "text": ["The rate of evaporation. A higher rate will leave less pooled water in each frame. If you want more water to pool you can increase ", {"text": ["Amount"], "type": "ui"}, " and/or decrease the evaporation rate."]}], "indent": 0, "text": ["Evaporation Rate"], "role": "item", "attrs": {"id": "rain_evaporation"}, "extent": [11875, 11893], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Raindrop Settings "], "type": "sep", "extent": [12109, 12137], "level": 4}, {"indent": 0, "type": "para", "extent": [12137, 12327], "text": ["These settings can be used to control the size of raindrops. As you expand the radius of each raindrop you will have fewer drops to ensure the density of precipitation will stay constant."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [12370, 12573], "text": ["This parameter can be used to expand the radius of each raindrop to cover more cells. This produces larger drops, which could make the incisions on the terrain more sparse and increase their width."]}], "indent": 0, "text": ["Expand Radius"], "role": "item", "attrs": {"id": "rain_expandradius"}, "extent": [12327, 12342], "type": "parameters_item"}, {"body": [], "indent": 0, "text": ["Blur Radius"], "role": "item", "attrs": {"id": "rain_blurradius"}, "extent": [12573, 12586], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Water Flow "], "type": "sep", "extent": [12863, 12882], "level": 3}, {"body": [{"body": [], "indent": 0, "text": ["Quantization"], "role": "item", "attrs": {"id": "water_quant"}, "extent": [12882, 12897], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [13133, 13201], "text": ["Smooth the water on the terrain as a post processing step."]}], "indent": 0, "text": ["Post Smooth"], "role": "item", "attrs": {"id": "water_postsmooth"}, "extent": [13081, 13094], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Debris Flow "], "type": "sep", "extent": [13201, 13221], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [13273, 13345], "text": ["How many iterations of the spread algorithm to run for each frame."]}], "indent": 0, "text": ["Spread Iterations"], "role": "item", "attrs": {"id": "debris_iterations"}, "extent": [13221, 13241], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [13382, 13541], "text": ["Controls the chunkiness of the debris flow. A lower value would make the flow more continuous and a higher value would make the flow more chunky."]}], "indent": 0, "text": ["Quantization"], "role": "item", "attrs": {"id": "debris_quant"}, "extent": [13345, 13359], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [13594, 13671], "text": ["Smooth the debris on the terrain as a post processing step."]}], "indent": 0, "text": ["Post Smooth"], "role": "item", "attrs": {"id": "debris_postsmooth"}, "extent": [13541, 13554], "type": "parameters_item"}, {"body": [{"indent": 3, "type": "para", "extent": [13711, 13957], "text": ["Controls the movement of the debris based on last frame\u2019s flow field. Higher values would stop the debris from moving near the flow channels, and lower values would cause the debris to ignore the flow channels, making it move independently. "]}], "indent": 0, "text": ["Water Absorption"], "role": "item", "attrs": {"id": "water_absor"}, "extent": [13671, 13689], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [14000, 14133], "text": ["The maximum height of wet debris that would not move due to water absorption. Beyond this limit the debris start to move again."]}], "indent": 0, "text": ["Max Height"], "role": "item", "attrs": {"id": "debris_maxheight"}, "extent": [13957, 13969], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [14175, 14308], "text": ["The maximum slope (measured in degrees from the horizontal) at which loose solid material will remain in place without sliding."]}], "indent": 0, "text": ["Repose Angle"], "role": "item", "attrs": {"id": "debris_repose"}, "extent": [14133, 14147], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [14378, 14451], "text": ["Controls whether to use a mask for repose angle or not."]}], "indent": 0, "text": ["reposeanglemaskmode"], "role": "item", "attrs": {"id": "debris_reposeanglemaskmode"}, "extent": [14308, 14329], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [14520, 14572], "text": ["The name of the repose angle mask."]}], "indent": 0, "text": ["Repose Angle Mask"], "role": "item", "attrs": {"id": "debris_reposeanglemasklayer"}, "extent": [14451, 14470], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Advanced"], "extent": [6440, 6455], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [14605, 14756], "text": ["Each frame of simulation the bedrock layer will be replaced with\n    this layer in the second input.  If not present, no replacement is\n    done."]}], "indent": 0, "text": ["Bedrock Override"], "role": "item", "extent": [14586, 14605], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [14789, 15020], "text": ["When the bedrock is changed, also adjust the terrain height.  This\n    allows for mountain building where the second input has an animated\n    mountain growing, the net new height is added each frame while\n    erosion occurs."]}], "indent": 0, "text": ["Adjust Height by Bedrock Change"], "role": "item", "extent": [14756, 14789], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "text": [" Strata "], "type": "sep", "extent": [15020, 15035], "level": 3}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [15066, 15160], "text": ["Adjusts how erodable rock is by how far it is away from the reference\n    bedrock layer."]}], "indent": 0, "text": ["Adjust Erodability by Strata"], "role": "item", "extent": [15035, 15066], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [15174, 15457], "text": ["The depth for the strata.  The Strata Erodability ramp uses this depth\n    to control how deep it represents.   A positive values means the strata\n    represents hardness below the bedrock layer.  Negative values mean\n    the strata represents hardness above the bedrock layer."]}], "indent": 0, "text": ["Strata Depth"], "role": "item", "extent": [15160, 15174], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [15481, 15632], "text": ["Depths outside of the strata range will be clamped to the ends of the\n    ramp.  If clamping is off, they will repeat forming a periodic pattern."]}], "indent": 0, "text": ["Clamp at Strata Bounds"], "role": "item", "extent": [15457, 15481], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [15652, 15914], "text": ["How erodable rocks are at different strata depths.  The left most\n    is at the bedrock reference layer, the right most at the extreme\n    strata depth.  Values of 1 are fully erodable, such as loose dirt,\n    and values of 0 prevent erosion, like granite."]}], "indent": 0, "text": ["Strata Erodability"], "role": "item", "extent": [15632, 15652], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Bedrock"], "extent": [14572, 14586], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [15927, 16052], "text": ["The options on this tab control what the node does if the input contains layers this node normally generates from scratch."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [16135, 16316], "text": ["If the input already has a debris layer (for example from a previous erode node, or painted manually), keep it as debris but ignore it in this node\u2019s erosion calculations."]}], "indent": 0, "text": ["Remove Debris Layer from Input Height Layer"], "role": "item", "attrs": {"id": "debris_removefromheight"}, "extent": [16052, 16097], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [16397, 16576], "text": ["If the input already has a water layer (for example from a previous erode node, or painted manually), keep it as water but ignore it in this node\u2019s erosion calculations."]}], "indent": 0, "text": ["Remove Water Layer from Input Height Layer"], "role": "item", "attrs": {"id": "water_removefromheight"}, "extent": [16316, 16360], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [16620, 16680], "text": ["If the input already has a water layer, delete it."]}], "indent": 0, "text": ["Reset Water Layer"], "role": "item", "attrs": {"id": "clearwater"}, "extent": [16576, 16595], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [16726, 16783], "text": ["If the input already has a debris layer, delete it."]}], "indent": 0, "text": ["Reset Debris Layer"], "role": "item", "attrs": {"id": "cleardebris"}, "extent": [16680, 16700], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [16833, 16896], "text": ["If the input already has a sediment layer, delete it."]}], "indent": 0, "text": ["Reset Sediment Layer"], "role": "item", "attrs": {"id": "clearsediment"}, "extent": [16783, 16805], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [16969, 17197], "text": ["Use the values in the debris layer to add to the height layer. You might turn this off, for example, if you plan to represent the debris layer some other way, such as a separately shaded volume, or instanced rock geometry."]}], "indent": 0, "text": ["Add Debris Layer to Final Height Layer"], "role": "item", "attrs": {"id": "debris_addtoheight"}, "extent": [16896, 16936], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [17268, 17599], "text": ["Use the values in the water elevation layer to add to the height layer. The default is off. This will \"bake\" the water level into the height values, so for example pooled water will become flat terrain. This might be useful if you just want a very simple output where you will just color the \"water\" areas with a flat color."]}], "indent": 0, "text": ["Add Water Layer to Final Height Layer"], "role": "item", "attrs": {"id": "water_addtoheight"}, "extent": [17197, 17236], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Layers"], "extent": [15914, 15927], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [17620, 17722], "text": ["The controls on this tab let you change the default names of the layers the node looks for/creates."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [40, 109], "text": ["The name of the height volume to operate on, usually ", {"text": ["height"], "type": "code"}, "."]}], "indent": 0, "text": ["Height Layer"], "role": "item", "attrs": {"id": "heightlayer"}, "extent": [0, 14], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [17807, 17884], "text": ["The name of the layer containing the water elevation (default ", {"text": ["water"], "type": "code"}, ")."]}], "indent": 0, "text": ["Water Layer"], "role": "item", "attrs": {"id": "waterlayer"}, "extent": [17769, 17782], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [17928, 18007], "text": ["The name of the layer containing the debris elevation (default ", {"text": ["debris"], "type": "code"}, ")."]}], "indent": 0, "text": ["Material Layer"], "role": "item", "attrs": {"id": "materiallayer"}, "extent": [17884, 17900], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [18051, 18142], "text": ["The name of the layer containing the sediment elevation (default ", {"text": ["sediment"], "type": "code"}, ")."]}], "indent": 0, "text": ["Sediment Layer"], "role": "item", "attrs": {"id": "sedimentlayer"}, "extent": [18007, 18023], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [18180, 18348], "text": ["The reference layer for determining how far the current height\n    has eroded.  If not present on the input, is set to the original\n    height of the terrain."]}], "indent": 0, "text": ["Bedrock Layer"], "role": "item", "attrs": {"id": "bedrocklayer"}, "extent": [18142, 18157], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [18384, 18687], "text": ["The node outputs a ", {"text": ["flow"], "type": "code"}, " layer representing the ", {"text": ["cumulative"], "type": "em"}, " water flow. This layer has two signed components (x and y) representing the flow direction in voxel space. Because this is cumulative, if water flows left, then flows right, those two motions will cancel and the x component would be 0."]}], "indent": 0, "text": ["Flow Layer"], "role": "item", "attrs": {"id": "flowlayer"}, "extent": [18348, 18360], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [18730, 18843], "text": ["The node outputs a ", {"text": ["flowdir"], "type": "code"}, " layer containing vectors showing the average direction of flow at each voxel."]}], "indent": 0, "text": ["Flow Dir Layer"], "role": "item", "attrs": {"id": "flowdirlayer"}, "extent": [18687, 18703], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Layer Bindings"], "extent": [17599, 17620], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [18901, 19005], "text": ["The node does not start simulation erosion until this frame. The default is ", {"text": ["1"], "type": "code"}, " (the first frame)."]}], "indent": 0, "text": ["Start Frame"], "role": "item", "attrs": {"id": "startframe"}, "extent": [18860, 18876], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [19050, 19213], "text": ["Caches completed simulation frames in memory, for interactive scrubbing. For very large erosions, turning this option off is the best way to save memory."]}], "indent": 0, "text": ["Cache Simulation"], "role": "item", "attrs": {"id": "cacheenabled"}, "extent": [19005, 19023], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [19262, 19635], "text": ["When ", {"text": ["Cache simulation"], "type": "ui"}, " is on and this option is on, the simulation will start caching frames to disk when it reaches the ", {"text": ["Cache memory"], "type": "ui"}, " limit. Frames on disk will be slower to load than frames in memory, but still faster than re-simulating. When this option is off and the simulation reaches the limit, it simply starts deleting the oldest frames from the cache."]}], "indent": 0, "text": ["Allow Caching To Disk"], "role": "item", "attrs": {"id": "cachetodisk"}, "extent": [19213, 19236], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [19681, 19765], "text": ["The maximum amount of memory (in megabytes) to use to cache simulated frames."]}], "indent": 0, "text": ["Cache Memory (MB)"], "role": "item", "attrs": {"id": "cachemaxsize"}, "extent": [19635, 19654], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Simulation"], "extent": [18843, 18860], "container": true, "type": "h", "id": null}, {"body": [{"indent": 0, "type": "para", "extent": [19785, 19957], "text": ["This tab contains options for visualizing the height and other layers. These are the same options as on the ", {"text": ["Height Field Visualize"], "fullpath": "/nodes/sop/heightfield_visualize", "scheme": "Node", "type": "link", "value": "/nodes/sop/heightfield_visualize"}, " node."]}, {"body": [{"body": [{"indent": 4, "type": "para", "extent": [19994, 20148], "text": ["Applies a visualization material so you can see an elevation color ramp on the height field and see the water and debris layers as different colors."]}], "indent": 0, "text": ["Visualize"], "role": "item", "attrs": {"id": "dovisualize"}, "extent": [19957, 19968], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [4049, 4177], "text": ["Fill in the ", {"text": ["Min Elevation"], "type": "ui"}, " and ", {"text": ["Max elevation"], "type": "ui"}, " parameters using the current min and max values from the height field."]}], "indent": 0, "text": ["Compute Range"], "role": "item", "attrs": {"id": "vis_computerange"}, "extent": [4003, 4018], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4223, 4281], "text": ["The minimum height value to map into the color ramp."]}], "indent": 0, "text": ["Min Elevation"], "role": "item", "attrs": {"id": "vis_minelevation"}, "extent": [4177, 4192], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4323, 4385], "text": ["The maximum height value to map into the color ramp."]}], "indent": 0, "text": ["Max Elevation"], "role": "item", "attrs": {"id": "vis_maxelevation"}, "extent": [4281, 4296], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4427, 4581], "text": ["Maps height values in the height field (from ", {"text": ["Min elevation"], "type": "ui"}, " to ", {"text": ["Max elevation"], "type": "ui"}, ") into a color ramp to control coloring of the 3D height surface."]}], "indent": 0, "text": ["Height Ramp"], "role": "item", "attrs": {"id": "vis_heightramp"}, "extent": [4385, 4398], "type": "parameters_item"}, {"body": [{"type": "para", "indent": 4, "extent": [4619, 4797], "text": ["Enter the name of a mask layer and a color to visualize the layer as color on top of the elevation color ramp. Layer 3 appears over layer 2, which appears over layer 1."]}], "indent": 0, "text": ["Layer 3/2/1"], "role": "item", "attrs": {"id": "vis_layer3"}, "extent": [4581, 4594], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Visualization"], "extent": [19765, 19785], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [2884, 2896], "container": true, "type": "parameters_section", "id": "parameters"}], "title": ["HeightField Erode"], "summary": ["Calculates thermal and hydraulic erosion over time (frames) to create more realistic terrain."], "attrs": {"version": "2.0", "namespace": null, "internal": "heightfield_erode", "context": "sop", "type": "node", "icon": "SOP/heightfield_erode"}, "included": ["/nodes/sop/_heightfield_common", "/nodes/sop/heightfield_visualize"], "type": "root"}