{"body": [{"indent": 0, "text": ["POP Solver"], "type": "title", "extent": [69, 84], "level": 0}, {"indent": 0, "type": "summary", "extent": [84, 165], "text": ["A POP solver updates particles according to their velocities and forces."]}, {"indent": 0, "type": "para", "extent": [165, 236], "text": ["POP Solver is a solver designed to update particles for one timestep."]}, {"indent": 0, "type": "para", "extent": [236, 360], "text": ["It is intended that its green inputs have wired into them POP microsolvers to control the particles and accumulate forces."]}, {"indent": 0, "type": "para", "extent": [360, 403], "text": ["It integrates using the following forces:"]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [427, 494], "text": ["This pair describes a local drag frame for each particles."]}], "indent": 0, "type": "dt", "extent": [403, 427], "text": [{"text": ["targetv"], "type": "code"}, ", ", {"text": ["airresist"], "type": "code"}]}, {"body": [{"indent": 8, "type": "para", "extent": [504, 568], "text": ["Specifies a magnitude of force affecting each particle."]}], "indent": 0, "type": "dt", "extent": [494, 504], "text": [{"text": ["force"], "type": "code"}]}, {"body": [{"indent": 8, "type": "para", "extent": [593, 673], "text": ["This pair describes a spin-drag frame.  The target w is in world space."]}], "indent": 0, "type": "dt", "extent": [568, 593], "text": [{"text": ["targetw"], "type": "code"}, ", ", {"text": ["spinresist"], "type": "code"}]}, {"body": [{"indent": 8, "type": "para", "extent": [683, 759], "text": ["Specifies the world-space torque to apply to the particle."]}], "indent": 0, "type": "dt", "extent": [673, 683], "text": [{"text": ["torque"], "type": "code"}]}], "container": true, "type": "dt_group"}, {"indent": 0, "type": "para", "extent": [759, 833], "text": ["For more information see ", {"text": ["Particle Collisions"], "fullpath": "/dopparticles/collisions", "scheme": null, "type": "link", "value": "/dopparticles/collisions"}, "."]}, {"body": [{"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [876, 949], "text": ["The POP solver will always enforce this minimum number of substeps."]}, {"indent": 4, "type": "para", "extent": [949, 997], "text": ["This should only rarely need to be changed."]}], "indent": 0, "text": ["Min Substeps"], "role": "item", "extent": [861, 876], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1011, 1107], "text": ["The POP solver will not break the simulation down in to more\n    substeps than this value."]}], "indent": 0, "text": ["Max Substeps"], "role": "item", "extent": [997, 1011], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1122, 1318], "text": ["The CFL condition is a factor used to automatically determine what\n    size substep the scene requires. The idea is to control the distance\n    that a particle can travel in a given substep."]}, {"indent": 4, "type": "para", "extent": [1318, 1521], "text": ["For example, when this parameter is set to 0.5, the solver will set\n    the length of each substep such that no particle travels more than\n    50% of the size of the smallest particle in a substep."]}], "indent": 0, "text": ["CFL Condition"], "role": "item", "extent": [1107, 1122], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1547, 1906], "text": ["Alway use substeps that divide up the frame by ", {"text": ["Max Substeps"], "type": "ui"}, ".  For example,\n    if ", {"text": ["Max Substeps"], "type": "ui"}, " is set to 4, but the ", {"text": ["CFL Condition"], "type": "ui"}, " only requires 3 substeps,\n    the solver will take frame steps of 0.25, 0.5, and 0.25.  This option can be useful for\n    re-using input geometry that has been cached to file at increments of 1/", {"text": ["Max Substeps"], "type": "ui"}, "."]}], "indent": 0, "text": ["Quantize to Max Substeps"], "role": "item", "extent": [1521, 1547], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [1918, 2004], "text": ["An overall scale applied to the actual timestep. This parameter can be animated."]}], "indent": 0, "text": ["Time Scale"], "role": "item", "extent": [1906, 1918], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Substeps"], "extent": [845, 861], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [2037, 2352], "text": ["The drag described by ", {"text": ["targetv"], "type": "code"}, " and ", {"text": ["airresist"], "type": "code"}, " can be turned into an explicit force.  This will result in particles not coming to a stop, but instead bouncing around the desired dragged location.  Alternatively, you can turn on implicit drag and a more accurate damping will be done that stops the particles."]}, {"indent": 4, "type": "para", "extent": [2352, 2426], "text": ["This will also affect how ", {"text": ["targetw"], "type": "code"}, " and ", {"text": ["spinresist"], "type": "code"}, " are integrated."]}], "indent": 0, "text": ["Use Implicit Drag"], "role": "item", "extent": [2017, 2037], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2441, 2670], "text": ["The force of drag will be proportional to the difference between the target velocity and the particles velocity.  This difference can be linear (drag exponent of 1) or quadratic (drag exponent of 2) or something in between."]}, {"indent": 4, "type": "para", "extent": [2670, 2837], "text": ["A value of two is a more realistic drag model which more quickly slows down extreme velocity differences and has less of an effect on small velocity differences."]}, {"indent": 4, "type": "para", "extent": [2837, 2890], "text": ["This affects the angular velocity drag as well."]}], "indent": 0, "text": ["Drag Exponent"], "role": "item", "extent": [2426, 2441], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [2920, 3058], "text": ["The ", {"text": ["age"], "type": "code"}, " attribute will be updated for each time step and the particles flagged for deletion if they exceed their ", {"text": ["life"], "type": "code"}, " attribute."]}], "indent": 0, "text": ["Age Particles"], "role": "item", "attrs": {"id": "doage"}, "extent": [2890, 2905], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3075, 3188], "text": ["This controls whether external DOP forces will be added to the force model prior to integrating velocities."]}], "indent": 0, "text": ["External Forces"], "role": "item", "extent": [3058, 3075], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3208, 3399], "text": ["The ", {"text": ["v"], "type": "code"}, " attribute will be updated according to ", {"text": ["targetv"], "type": "code"}, ", ", {"text": ["airresist"], "type": "code"}, ", and ", {"text": ["force"], "type": "code"}, ".  The ", {"text": ["w"], "type": "code"}, " attribute will be updated by the ", {"text": ["targetw"], "type": "code"}, ", ", {"text": ["spinresist"], "type": "code"}, ", and ", {"text": ["torque"], "type": "code"}, " if this is turned on."]}], "indent": 0, "text": ["Integrate Velocity"], "role": "item", "extent": [3188, 3208], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3409, 3599], "text": ["Controls if the ", {"text": ["mass"], "type": "code"}, " attribute will affect how forces are added to the velocity.  If use mass is set, the forces will be divided by the mass to get the acceleration of each particle."]}], "indent": 0, "text": ["Use Mass"], "role": "item", "extent": [3399, 3409], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3620, 3751], "text": ["The particles will be moved according to their velocity.  They will also be re-oriented according to their angular velocity."]}], "indent": 0, "text": ["Integrate Positions"], "role": "item", "extent": [3599, 3620], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3792, 3863], "text": ["All particles with the ", {"text": ["dead"], "type": "code"}, " attribute set to 1 will be deleted."]}], "indent": 0, "text": ["Reap Particles"], "role": "item", "attrs": {"id": "doreapparticles"}, "extent": [3751, 3767], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [3882, 4166], "text": ["Dead particles will be removed after all solving is complete.  In this mode, you will not see any particles with a ", {"text": ["dead"], "type": "code"}, " value of 1. Otherwise, they will be deleted before the Pre-solve.  Leaving them in the geometry allows one to tween dying particles to their final location."]}], "indent": 0, "text": ["Reap At Frame End"], "role": "item", "extent": [3863, 3882], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}, {"indent": 0, "type": "para", "extent": [4166, 4191], "text": ["== Collision Behavior ="]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [4219, 4506], "text": ["Determines if any collision detection is done at all by the POP Solver.\n        If mixing with another system, such as Bullet, you may wish to still\n        use some of the integration options of the POP Solver (such as force)\n        without including the collision component."]}], "indent": 0, "text": ["Enable Collision Detection"], "role": "item", "extent": [4191, 4219], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [4526, 4738], "text": ["If you wish to do more than just bounce off other DOP collision\n        objects, you can add hit attributes to inspect how the\n        bounce occurred, and perform secondary animations using the result."]}, {"indent": 8, "type": "para", "extent": [4738, 4963], "text": ["The ", {"text": ["hitnum"], "type": "code"}, " attribute is often most useful to detect if particles\n        just collided.  You can either directly apply additional rules\n        here, or use the POP Collision Behavior to layer more effects on top."]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [4977, 5186], "text": ["When computing hit attributes, all eligibly objects are collided\n            with.  The ", {"text": ["ispbd"], "type": "code"}, ", ", {"text": ["stopped"], "type": "code"}, ", and ", {"text": ["collisionignore"], "type": "code"}, " flags are\n            ignored.  The ", {"text": ["sliding"], "type": "code"}, " flag ", {"text": ["is"], "type": "strong"}, " used."]}], "indent": 8, "role": "item", "type": "note", "extent": [4963, 4977]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Add Hit Attributes"], "role": "item", "extent": [4506, 4526], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5203, 5466], "text": ["While attributes are added to all particles that collide, the\n        following collision behaviors will only apply to the particles\n        in this group.  For example, if you wish particles to die after their\n        first bounce, use ", {"text": ["@hittotal>1"], "type": "code"}, ".  "]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [5480, 5621], "text": ["This group is evaluated after collision detection is performed, so\n            ", {"text": ["hittotal"], "type": "code"}, " will already include the current hit."]}], "indent": 8, "role": "item", "type": "note", "extent": [5466, 5480]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Group to Affect"], "role": "item", "extent": [5186, 5203], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5635, 5726], "text": ["All particles that just hit, ie, ", {"text": ["@hitnum>0"], "type": "code"}, ", will be added to this\n        group."]}], "indent": 0, "text": ["Create Group"], "role": "item", "extent": [5621, 5635], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5742, 5943], "text": ["If the group isn\u2019t preserved, it is cleared out first so the only particles in the group will be those that just hit. If it is preserved, the group will accumulate all particles that ever hit."]}], "indent": 0, "text": ["Preserve Group"], "role": "item", "extent": [5726, 5742], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [5955, 6090], "text": ["Particles that are just hit will have their ", {"text": ["Cd"], "type": "code"}, " attribute set to this value.  This is useful for quick visualization of hits."]}], "indent": 0, "text": ["Color Hits"], "role": "item", "extent": [5943, 5955], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [6109, 6214], "text": ["Adds to the integer ", {"text": ["hittotal"], "type": "code"}, " attribute any hits that occurred due to this collision detection."]}], "indent": 0, "text": ["Compute Hit Total"], "role": "item", "extent": [6090, 6109], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [6227, 6524], "text": ["Often if you want to trigger an effect off a particle\u2019s collision, such as birthing more particles, you want the particle at its hit location, not where it ended up at the\n        end of the frame.  This will move the particle back to its hit location.  This consists of ", {"text": ["@P = v@hitpos;"], "type": "code"}, "."]}], "indent": 0, "text": ["Move to Hit"], "role": "item", "extent": [6214, 6227], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [6534, 6600], "text": ["Controls what happens to particles that collide."]}, {"body": [{"body": [{"indent": 12, "type": "para", "extent": [6619, 6747], "text": ["Particles will continue to behave as they are already defined.\n            This will usually cause them to bounce."]}], "indent": 8, "type": "dt", "extent": [6600, 6619], "text": ["Unchanged"]}, {"body": [{"indent": 12, "type": "para", "extent": [6760, 6879], "text": ["Particles that hit will set the ", {"text": ["dead"], "type": "code"}, " attribute to 1, causing them to be deleted during the reaping pass."]}], "indent": 8, "type": "dt", "extent": [6747, 6760], "text": ["Die"]}, {"body": [{"indent": 12, "type": "para", "extent": [6893, 7163], "text": ["This sets the ", {"text": ["stopped"], "type": "code"}, " attribute to 1.  Particles that stop will no longer integrate their velocity, position, orientation, or angular velocity.  They can still be moved directly. For example, by the ", {"text": ["Look At POP"], "fullpath": "/nodes/dop/poplookat", "scheme": "Node", "type": "link", "value": "/nodes/dop/poplookat"}, " in instantaneous mode."]}, {"indent": 12, "type": "para", "extent": [7163, 7215], "text": ["These particles will no longer collide."]}], "indent": 8, "type": "dt", "extent": [6879, 6893], "text": ["Stop"]}, {"body": [{"indent": 12, "type": "para", "extent": [7230, 7547], "text": ["Particles that hit will have the ", {"text": ["stuck"], "type": "code"}, " attribute set to 1.  The ", {"text": ["pospath"], "type": "code"}, ", ", {"text": ["posprim"], "type": "code"}, ", and ", {"text": ["posuv"], "type": "code"}, " attributes will be setup to point to the hit location, causing the integrator to keep moving the particles to their stuck location every frame.  Usually you also want to turn on ", {"text": ["Move to Hit"], "type": "ui"}, " with this."]}], "indent": 8, "type": "dt", "extent": [7215, 7230], "text": ["Stick"]}, {"body": [{"indent": 12, "type": "para", "extent": [7562, 7816], "text": ["Particles that hit will have the ", {"text": ["sliding"], "type": "code"}, " attribute set to 1.  The ", {"text": ["pospath"], "type": "code"}, ", ", {"text": ["posprim"], "type": "code"}, ", and ", {"text": ["posuv"], "type": "code"}, " attributes will be setup to point to the hit location, causing the integrator to try to slide the particles along the surface."]}, {"body": [{"body": [{"indent": 16, "type": "para", "extent": [7833, 8015], "text": ["You can also use the ", {"text": ["Cling"], "type": "ui"}, " attribute on the ", {"text": ["POP Property"], "fullpath": "/nodes/dop/popproperty", "scheme": "Node", "type": "link", "value": "/nodes/dop/popproperty"}, " node to set how much the particles will cling to the object they are sliding on."]}], "indent": 12, "role": "item", "type": "tip", "extent": [7816, 7833]}], "container": true, "role": "item_group", "type": "tip_group"}, {"body": [{"body": [{"indent": 16, "type": "para", "extent": [8033, 8140], "text": ["Once the particles are in a sliding state, they will no longer collide with other objects."]}], "indent": 12, "role": "item", "type": "note", "extent": [8015, 8033]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 8, "type": "dt", "extent": [7547, 7562], "text": ["Slide"]}], "container": true, "type": "dt_group"}], "indent": 0, "text": ["Response"], "role": "item", "extent": [6524, 6534], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [8157, 8403], "text": ["Enables the addition of Impact data onto the particles.  Normally\n            these are not added to save memory, and particle collision attributes\n            are more easily created by enabling the ", {"text": ["Add Hit Attributes"], "type": "ui"}, " parameter."]}], "indent": 0, "text": ["Add Impact Data"], "role": "item", "extent": [8140, 8157], "type": "parameters_item"}, {"body": [{"indent": 12, "type": "para", "extent": [8430, 8564], "text": ["Enables the addition of Feedback impacts onto colliding objects,\n            which are required for two-way interaction."]}], "indent": 0, "text": ["Enable Collision Feedback"], "role": "item", "extent": [8403, 8430], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Update"], "extent": [2004, 2017], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [8599, 8732], "text": ["Particles that remain near-stationary for sufficient time will be\n    put to sleep by setting their ", {"text": ["stopped"], "type": "code"}, " attribute to ", {"text": ["1"], "type": "code"}, "."]}], "indent": 0, "text": ["Enable Auto Sleep"], "role": "item", "extent": [8579, 8599], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8746, 8807], "text": ["On the first frame all particles will be marked asleep."]}], "indent": 0, "text": ["Start Asleep"], "role": "item", "extent": [8732, 8746], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [8827, 9094], "text": ["How slowly particles need to be moving before they are eligible\n    for sleeping.  The amount of time they remain below this speed\n    is accumulated in the ", {"text": ["deactivation_time"], "type": "code"}, " attribute.  If they\n    exceed this speed, the ", {"text": ["deactivation_time"], "type": "code"}, " is reset to zero."]}], "indent": 0, "text": ["Velocity Threshold"], "role": "item", "extent": [8807, 8827], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9107, 9323], "text": ["How many seconds particles need to remain at or below the\n    velocity threshold before they are put to sleep.  See the\n    ", {"text": ["Wake Up POP"], "fullpath": "/nodes/dop/popwakeup", "scheme": "Node", "type": "link", "value": "/nodes/dop/popwakeup"}, " for methods to wake the \n    particles back up again."]}], "indent": 0, "text": ["Sleep Delay"], "role": "item", "extent": [9094, 9107], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [9339, 9404], "text": ["Particles that are asleep will be colored this color.  "]}, {"body": [{"body": [{"indent": 8, "type": "para", "extent": [9414, 9607], "text": ["Awake particles will be left with their current color, so this will not cause particles that became awake to be recolored unless you have another ", {"text": ["Color POP"], "fullpath": "/nodes/dop/popcolor", "scheme": "Node", "type": "link", "value": "/nodes/dop/popcolor"}, " active."]}], "indent": 4, "role": "item", "type": "note", "extent": [9404, 9414]}], "container": true, "role": "item_group", "type": "note_group"}], "indent": 0, "text": ["Sleeping Color"], "role": "item", "extent": [9323, 9339], "type": "parameters_item"}], "container": true, "role": "item_group", "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Sleeping"], "extent": [8564, 8579], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 8, "type": "para", "extent": [694, 879], "text": ["The name of the simulation data to apply the POP node to.\n        This commonly is Geometry, but POP Networks can be designed\n        to apply to different geometry if desired."]}], "indent": 4, "text": ["Geometry"], "role": "item", "extent": [680, 694], "type": "parameters_item"}, {"body": [{"indent": 8, "type": "para", "extent": [905, 1245], "text": ["For nodes with local expressions, this controls where ", {"text": ["ch()"], "type": "code"}, "\n        style expressions in VEX are evaluated with respect to.  By\n        making this ", {"text": ["."], "type": "code"}, ", you can ensure relative references work.\n        It is important to promote this if you are embedding a node inside\n        an HDA you are also exporting the local expressions."]}], "indent": 4, "text": ["Evaluation Node Path"], "role": "item", "extent": [879, 905], "type": "parameters_item"}], "container": true, "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Bindings"], "extent": [9607, 9622], "container": true, "type": "h", "id": null}, {"body": [{"body": [{"body": [{"indent": 4, "type": "para", "extent": [33, 190], "text": ["What machine will run the simtracker.py process for synchronization.\n    If this is blank, there will be no attempt at synchronization or data transfer."]}], "indent": 0, "text": ["Tracker Address"], "role": "item", "extent": [16, 33], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [204, 290], "text": ["The port specified when starting the simtracker.py process for\n    communication."]}], "indent": 0, "text": ["Tracker Port"], "role": "item", "extent": [190, 204], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [300, 493], "text": ["The job name to describe this synchronization or data exchange\n    event.  By using different job names one can have machines part of\n    separate data-exchange and synchronization events."]}], "indent": 0, "text": ["Job Name"], "role": "item", "extent": [290, 300], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [505, 751], "text": ["The slice number that this machine should report itself as.  Each\n    machine connecting under the job name should have its own unique\n    slice number.  Sometimes this can be inferred from the operation\n    so this parameter will be absent."]}], "indent": 0, "text": ["Slice/Peer"], "role": "item", "extent": [493, 505], "type": "parameters_item"}, {"body": [{"indent": 4, "type": "para", "extent": [784, 935], "text": ["Total number of machines that have to synchronize.  Sometimes this\n    can be determined from the operation, so this parameter will be\n    absent."]}], "indent": 0, "text": ["Number of Slice/Number of Peers"], "role": "item", "extent": [751, 784], "type": "parameters_item"}], "container": true, "type": "parameters_item_group"}], "indent": 0, "level": 2, "text": ["Distribution"], "extent": [9672, 9691], "container": true, "type": "h", "id": null}], "indent": 0, "level": 1, "text": "Parameters", "role": "section", "extent": [833, 845], "container": true, "type": "parameters_section", "id": "parameters"}], "title": ["POP Solver"], "summary": ["A POP solver updates particles according to their velocities and forces."], "attrs": {"version": null, "namespace": null, "internal": "popsolver", "context": "dop", "type": "node", "icon": "DOP/popsolver"}, "included": ["/nodes/dop/standard_distribution", "/nodes/dop/standard_pop_parms"], "type": "root"}